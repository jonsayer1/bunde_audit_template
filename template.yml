bundle_secutiy_audit:
  extends: .ruby_base
  allow_failure: false
  stage: security
  script:
    - gem install bundler-audit
    - bundle audit check --update
    
rubocop:
  extends: .ruby_base
  stage: review
  allow_failure: true
  artifacts:
    name: rubocop_report
    when: always
    paths:
      - rubocop/
    expire_in: 1 week
  script:
    - gem install rubocop
    - gem install rubocop-rails
    - gem install rubocop-md
    - gem install rubocop-performance
    - gem install rubocop-rspec
    - rubocop --format html -o rubocop/index.html
  only: 
    - merge_requests
